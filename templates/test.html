<html>

<head>
    <meta charset="utf-8">
    <title>股票池推荐系统</title>
    <link href="https://libs.baidu.com/bootstrap/3.0.3/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://gw.alipayobjects.com/os/antv/assets/lib/jquery-3.2.1.min.js"></script>
    <script src="https://libs.baidu.com/bootstrap/3.0.3/js/bootstrap.min.js"></script>
    <script src="https://gw.alipayobjects.com/os/lib/antv/g2/3.4.10/dist/g2.min.js"></script>
    <script src="https://echarts.baidu.com/dist/echarts.common.min.js"></script>


</head>
<style>
    .tablem th,
    .tablem td {
        text-align: center;
        vertical-align: middle !important;
    }

    .myred {
        color: rgb(255, 51, 51);

    }

    .mygreen {
        background-color: rgb(150, 207, 150);
        color: white;
    }

    .jiacu {
        font-weight: 450;
    }

    .my_mouse {
        cursor: default
    }

    .on_click {
        background-color: rgb(255, 51, 51);
    }

    .left_min {
        float: left;
        width: 600;

    }

    .right_yd {
        float: right;
        width: 290;
        background-color: rgb(56, 46, 199);
    }

    body {
        font-family: "Microsoft Yahei", 微软雅黑, "Helvetica Neue", Arial, sans-serif;
    }
</style>

<body>
<div class="container" style="width:1300px">
    <div class="row">
        <div class="span6">
            <div id='c1'></div>

            <h1 class="text-center">
                股票池推荐系统

            </h1>
            <p id='testbut'></p>
            <p id='testbut1'></p>
            <p>
                <button id="time" class="btn   btn-large" type="button"></button>
            </p>
            <div id='nav_but' class="btn-group btn-group-justified" role="group" style="margin-bottom:10px"
                 aria-label="...">
                <div class="btn-group" role="group">
                    <button class="btn btn-default" type="button ">股票名称</button>
                </div>
                <div class="btn-group" role="group">
                    <button type="button" class="btn btn-default">股票代码</button>
                </div>
                <div class="btn-group" role="group">
                    <button type="button" class="btn btn-default">价格</button>
                </div>
                <div class="btn-group" role="group">
                    <button class="btn btn-default" type="button ">角度</button>
                </div>
                <div class="btn-group" role="group">
                    <button type="button" class="btn btn-default">涨幅</button>
                </div>
                <div class="btn-group" role="group">
                    <button type="button" class="btn btn-default">异动</button>
                </div>
                <div class="btn-group" role="group">
                    <button class="btn btn-default" type="button ">异动类数</button>
                </div>
                <div class="btn-group" role="group">
                    <button type="button" class="btn btn-default">突破时间</button>
                </div>
                <div class="btn-group" role="group">
                    <button type="button" class="btn btn-default">开盘价</button>
                </div>
                <div class="btn-group" role="group">
                    <button type="button" class="btn btn-default">昨收</button>
                </div>
                <div class="btn-group" role="group">
                    <button type="button" class="btn btn-default">压力位</button>
                </div>
            </div>
            <div class="panel-group" id="accordion">
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h4 class="panel-title">
                            <a data-toggle="collapse" id="baidu_e_click" data-parent="#accordion" href="#collapseOne">
                                点击我进行 展开，q。第 1 部分
                            </a>
                        </h4>
                    </div>
                    <div id="collapseOne" class="panel-collapse collapse in">
                        <div class="panel-body" style="padding:0.2%">
                            <div id='antg2' class="span8 left_min" style="width:650px; height:400px; ">
                                <!--G2绘制分时图-->
                            </div>
                            <div class="span4 right_yd">
                                任何带有 class .btn 的元素都会继承圆角灰色按钮的默认外观。但是 Bootstrap 提供了一些选项来定义按钮的样式，具体如下表
                            </div>


                        </div>
                    </div>
                </div>
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h4 class="panel-title">
                            <a data-toggle="collapse" data-parent="#accordion"
                               href="#collapseTwo">

                                点击我进行展开，再次点击我进行折叠。第 2 部分
                            </a>
                            <button>点击测试</button>
                        </h4>
                    </div>
                    <div id="collapseTwo" class="panel-collapse collapse">
                        <div class="panel-body"></div>
                    </div>
                </div>
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h4 class="panel-title">
                            <a data-toggle="collapse" data-parent="#accordion" href="#collapseThree">
                                点击我进行展开，再次点击我进行折叠。第 3 部分
                            </a>
                        </h4>
                    </div>
                    <div id="collapseThree" class="panel-collapse collapse">
                        <div class="panel-body">
                            Nihil anim keffiyeh helvetica, craft beer labore wes anderson
                            cred nesciunt sapiente ea proident. Ad vegan excepteur butcher
                            vice lomo.
                        </div>
                    </div>
                </div>
            </div>


        </div>

    </div>
</div>


<script>
    $.getDate = function (strDate) {
        var date = eval('new Date(' + strDate.replace(/\d+(?=-[^-]+$)/,
            function (a) {
                return parseInt(a, 10) - 1;
            }).match(/\d+/g) + ')');
        return date;
    }

    $.min_view = function (gub) {
        // $(gub).attr("id",'on_hot')
        if ($(gub).attr("code") != undefined) {
            ssu = '/gubiaochi?code=' + $(gub).attr("code")
        } else {
            ssu = '/testjson'
        }


    }


    $.baidu_min_view = function (gub) {

        $('#testbut').text($(gub).text())
    }


    $(function () {
        $('#time').text('北京时间:' + new Date().toLocaleString())

        setInterval(regubiao, 2000);

        //$.gubiao('#gubiao')
        function regubiao() {
            $('#time').text('北京时间:' + new Date().toLocaleString())
        }

        $("#nav_but div button").click(function () {
            //$('#testbut').text($(this).text())
            $.min_view(this)
            $.min_view()
            // $('#testbut').text(rdata.ssu)
            //$('#testbut1').text(rdata.s )

        });
        $("#baidu_e_click").click(function () {

            $.baidu_min_view(this)
            // $('#testbut').text(rdata.ssu)
            //$('#testbut1').text(rdata.s )

        });

        // 基于准备好的dom，初始化echarts实例
        var myChart = echarts.init(document.getElementById('antg2'));
        var xdata = new Array(260)
        // 指定图表的配置项和数据
        var option = {
            tooltip: {
                trigger: 'axis'
            },
            xAxis: {
                show: false,
                data: xdata
            },
            yAxis: {
                type: 'value',
                scale: true,

            },
            series: [{
                name: '价格',
                type: 'line',
            }, {
                name: '均价',
                type: 'line',
            }, {
                name: '涨幅',
                type: 'line',
            }

            ],


        };

        // 使用刚指定的配置项和数据显示图表。
        myChart.setOption(option);
        ssu = '/testjson'
        $.get(ssu, function (data, status) {
            if (status == "success") {
                if (data != -1) {
                    var obj = jQuery.parseJSON(data);
                    for (i in obj) {
                        info = obj[i]['info']
                        minData = obj[i]['data'].splice(14,obj[i]['data'].length)
                        gname = obj[i]['name']
                        gcode = obj[i]['code']
                        eMData = []
                        picData = []
                        zfData = []
                        maData = []

                        for (x in minData) {
                            tmp = minData[x].split(',')
                            eMData.push(tmp[0])
                            picData.push(tmp[1])
                            maData.push(tmp[3])
                            zfData.push((tmp[1]-info.yc)/info.yc*100)


                        }
                        eMData = eMData.concat(xdata).slice(0,243)

                        myChart.setOption({
                            xAxis: {
                                data:eMData
                            },
                            yAxis: {
                                type: 'value',
                            },

                            series: [{
                                name:'价格',
                                type:'line',
                                data: picData,
                                areaStyle: {}
                            },
                                {
                                    name:'均价',
                                    //type:'line',
                                    data: maData
                                },
                                {
                                    name:'涨幅',
                                    //type:'line',
                                    data: zfData
                                }


                            ],


                        });


                    }
                }

            }

        });


    });

</script>


<!--下面是使用G2的代码
<script>
    const data = [
        { genre: 'Sports', sold: 275 },
        { genre: 'Strategy', sold: 115 },
        { genre: 'Action', sold: 120 },
        { genre: 'Shooter', sold: 350 },
        { genre: 'Other', sold: 150 }
    ]; // G2 对数据源格式的要求，仅仅是 JSON 数组，数组的每个元素是一个标准 JSON 对象。
    // Step 1: 创建 Chart 对象

    /**
    const chart = new G2.Chart({
        container: 'c1', // 指定图表容器 ID
        width: 600, // 指定图表宽度
        height: 300 // 指定图表高度
    });**/
    // Step 2: 载入数据源
    chart.source(data);
    // Step 3：创建图形语法，绘制柱状图，由 genre 和 sold 两个属性决定图形位置，genre 映射至 x 轴，sold 映射至 y 轴
    chart.interval().position('genre*sold').color('genre')
    // Step 4: 渲染图表
    chart.render();





</script>
上面是使用G2的代码-->

</body>

</html>