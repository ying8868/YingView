<html>

<head>
    <title>股票池推荐系统</title>
    <link href="https://libs.baidu.com/bootstrap/3.0.3/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://gw.alipayobjects.com/os/antv/assets/lib/jquery-3.2.1.min.js"></script>
    <script src="https://libs.baidu.com/bootstrap/3.0.3/js/bootstrap.min.js"></script>

</head>
<style>
    .tablem th,
    .tablem td {
        text-align: center;
        vertical-align: middle !important;
    }

    .myred {
        color: rgb(255, 51, 51);

    }

    .mygreen {
        
        color: rgb(39, 0, 146);
    }

    .jiacu {
        font-weight: 450;
    }

    .my_mouse {
        cursor: default
    }
    .on_click {
        background-color: rgb(255, 51, 51);
    }

    body {
        font-family: "Microsoft Yahei", 微软雅黑, "Helvetica Neue", Arial, sans-serif;
    }
</style>
<script>
    /*https://cdn.bootcss.com/zclip/1.1.2/ZeroClipboard.swf*/
    $.gubiao = function (gub) {
        // $(gub).attr("id",'on_hot')

        $(gub).addClass("on_click");
        $(gub).siblings().removeClass('on_click');
        if ($(gub).attr("sort") != undefined) {
            ssu = '/gubiaochi?sort=' + $(gub).attr("sort") + '&sv=' + $(gub).attr("sv")
        }
        esturl = 'http://quote.eastmoney.com/concept/'
        estw = '.html'  //?from=classic#fschart-r

        $.get(ssu, function (data, status) {

            if (status == "success") {
                var obj = jQuery.parseJSON(data);
                //obj = obj.sort(compare("jd"));
                // $('#testt').text(obj[1].code) 
                // $('#testt2').text((obj[0].code)) 
                ghtml = ''
                i=0
                for (x in obj) {

                    if(obj[x].nzdf>0){
                        trcss = 'class="tablem info "'
                    }else {
                        trcss = 'class="tablem success"'
                    }


                    if (obj[x].sc == 1) {
                        url = esturl + 'sh' + obj[x].code + estw
                    }
                    if (obj[x].sc == 2) {
                        url = esturl + 'sz' + obj[x].code + estw
                    }
                    i=i+1
                    hi = '<tr ' + trcss + '><td><a href=' + url + ' target="_blank" >' + obj[x].name + '</a></td><td>' + obj[x].code +
                     '</td><td>'+obj[x].pice+'</td><td class="myred">'+(obj[x].nzdf).toFixed(2)+'</td><td>'+obj[x].yd_count+'</td><td>'+obj[x].yd_mod_count+
                     '</td><td class="myred">'+obj[x].dd_count+'</td><td class="mygreen">'+obj[x].kk_count+'</td><td class="myred">'+String(obj[x].dd_time)+'</td><td class="myred">'+String(obj[x].ntime).substring(11)+'</td><td>'+obj[x].hsl+'</td><td>'+obj[x].lb+
                     '</td><td>'+(obj[x].ylw).toFixed(2)+'</td><td class="myred">'+(obj[x].yl).toFixed(2)+'</td><td>'+obj[x].zhenf+
                     '</td> </tr>'
                    ghtml = ghtml + hi//obj[x].code
                }
                //gubiao_count
                $('#gubiao_count').text('股票总数为: '+i+' 只')
                //console.log(ghtml);
                $('#chi_list').html(ghtml)



                ///hi = '<tr ' + trcss + ' ><td>' + i + '</td><td class="jiacu">' + o.code + '</td><td class="jiacu "> <a  href=' + url + ' target="_blank">' + o.name + '</a></td> <td class="' + csclass + '">' +
                //  o.pice  + '</td><td>' + (o.jd).toFixed(2)
                //   + '</td><td class ="' + csclass + '">' + '</td><td>' + o.yd_count + '</td><td class ="' + csclass + '">' + o.yd_mod_count + '</td><td class ="' + csclass + '">' + o.dd_count + '</td><td>' + o.kk_count + '</td><td  class="' + csclass + '" >' + o.close + '</td><td>' + o.hsl + '</td><td class ="' + csclass + '">' + o.lb + '</td><td>' + o.ylw.toFixed(2)
                //   + '</td><td class ="' + csclass + '">' + o.yl.toFixed(2) + '</td><td>' + o.zhenf + '</td><td>' + ntimet+ '</td></tr>' ;


                //alert(html)
                //$('#td_chi').html(html)


                /*
                for (i in obj) {
                    trcss = 'class="tablem success"'
                    if (i % 2 == 0) {
                        trcss = 'class="tablem info "'
                    }
                    o = obj[i]  */
                /*
                if (o.pice > o.open) {
                    csclass = 'myred'
                } else {
                    csclass = 'mygreen'
                }
                **/
                /*
                if (o.sc == 1) {
                    url = esturl + 'sh' + o.code + estw
                }
                if (o.sc == 2) {
                    url = esturl + 'sz' + o.code + estw
                }
                 

                hi = '<tr ' + trcss + ' ><td>' + i + '</td><td class="jiacu">' + o.code + 
                '</td><td class="jiacu "> <a  href=' + url + ' target="_blank">' + o.name + '
                </a></td> <td class="' + csclass + '">' +
                  o.pice  + '</td><td>' + (o.jd).toFixed(2)
                    + '</td><td class ="' + csclass + '">' + o.nzdf + '</td><td>' + o.yd_count + '</td><td class ="' + csclass + '">' + o.yd_mod_count + '</td><td class ="' + csclass + '">' + o.dd_count + '</td><td>' + o.kk_count + '</td><td  class="' + csclass + '" >' + o.close + '</td><td>' + o.hsl + '</td><td class ="' + csclass + '">' + o.lb + '</td><td>' + o.ylw.toFixed(2)
                    + '</td><td class ="' + csclass + '">' + o.yl.toFixed(2) + '</td><td>' + o.zhenf + '</td><td>' + o.ntime.substring(11)+ '</td></tr>' ;

                html = html + hi
                
            }*/

                //$('#td_chi').html(html)



            }

        });
        
    
    }
    $(function () {
        $('#time').text('北京时间:' + new Date().toLocaleString())
        setInterval(regubiao, 2000); 
        function regubiao() {
            $.gubiao( )  
            $('#time').text('北京时间:' + new Date().toLocaleString())
        }
        $.gubiao('#gubiao')
        //esturl='http://quote.eastmoney.com/concept/sh601519.html?from=classic#fschart-r' 

        $("th").click(function () {
            /*当 单击 标题栏的时候所需要进行的操作 */

            $.gubiao(this)

        });

        $("th").dblclick(function () {
            /*当 双击 标题栏的时候所需要进行的操作 */

            sv = $(this).attr("sv")
            if (sv == -1) {
                $('th').attr("sv", '-1')
                $(this).attr("sv", '1')
            } else {
                $('th').attr("sv", '-1')
            }

            $.gubiao(this)
        });
    });


</script>

<body>
    <div class="container">
        <div class="row">
            <div class="span1">

            </div>
            <div class="span8">
                <p id='testt'></p>
                <div id='testt2'></div>
                <h1 class="text-center">
                    股票池推荐系统

                </h1>

                <button id="time" class="btn   btn-large" type="button"> </button><button id="gubiao_count" class="btn   btn-large" type="button"> </button>

                <table class="table  table-bordered my_mouse">
                    <thead id='th_id'>
                        <tr class="  tablem">  
                            <th>
                                股票名称
                            </th>
                            <th sort="code" sv='-1'>
                                股票代码
                            </th>
                            <th sort="pice" sv='-1'>
                                价格
                            </th>
                            <th sort="nzdf" sv='-1' >
                                涨幅
                            </th>
                            <th sort="yd_count" sv='-1'>
                                次数
                            </th>
                            <th sort="yd_mod_count" sv='-1'>
                                种类
                            </th>
                            <th sort="dd_count" sv='-1'>
                                大买
                            </th>
                            <th sort="kk_count" sv='-1'>
                                大卖
                            </th>
                            <th sort="dd_time" sv='1' id='gubiao'>
                                DDTime
                            </th>
                            <th sort="ntime" sv='-1'>
                                T突破
                            </th> 
                            <th sort="hsl" sv='-1'>
                                换手率
                            </th>
                            <th sort="lb" sv='-1'>
                                量比
                            </th>
                            <th sort="ylw" sv='-1'>
                                压力位
                            </th>
                            <th sort="yl" sv='-1'>
                                压力
                            </th>
                            <th sort="zhenf" sv='-1'>
                                振幅
                            </th>
                            
                        </tr>
                    </thead>
                    <tbody id="chi_list" class="info">
                    </tbody>
                </table>
            </div>
            <div class="span1 ">

            </div>
        </div>
    </div>



</body>

</html>